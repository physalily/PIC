LIST P-PIC 16F84A i list directive to define processor
#INCLUDE <P 16F84A INC>, processor specific variable definitions
[CONFIG-HS-OSC&-CP-OFF & _WDT-OFF & _PWRTE-ON
W TEMP
STATUS TEMP
TMP
FLG1
FLG2
EQU 0CH
EQU ODH
EQU 0EH
EQUOFH
EQU 10H
ORG OH
GOTO MAIN
ORG04H
PUSH
MOVWF W_TEMP
MOVF STATUS, W
MOVWF STATUS_TEMP
MOVF PORTB, W
MOVWF TMP
If RB51
i FLG21=FLG2
BTFSC TMP, 5
COMF FLG2, F
BTFSC TMP, 4
COMF FLG1, F
; FLGTE FLGI
POP
MOVF STATUS_TEMP, W
MOVWF STATUS
SWAPF W TEMP, F
SWAPF W TEMP, W
BCF INTCON, RBIF clear RB interrupt flag
RETFIE
REMAINING CODE GOES HERE
MAIN
BCF INTCON, GIE
BSF STATUS, RPO
CLRF TRISA
MOVLW 030H
MOVWF TRISB
, Disable interrupts
Bank1
RA->Output
RB7:6->Output,
, RB5:4->Input,
: RB3:0>Output
BCF
CLRF
CLRF FLG1
CLRF FLG2
CLRF TMP
BSF
BSF
BCF
STATUS, RPO
PORTA
, Bank0
All RA->Low
INTCON, RBIE
INTCON, GIE
NTCON, RBIF
Enable RB interrupts
; Enable interrupts
; Clear RB interrupts flag
LOOP
BTFSC FLG1
BSF
BTFSS FLG1
BCF
; if FLG1 <0> = 1
RAO 1
RAO 0
if FLG2<0>
TMP
else
TMP
BTFSC FLG2, 0
BSF
BTFSS FLG2, 0
BCF
1
TMP
RA1 1
, else
TMP,
RA1 0
MOVFW TMP
MOVWF PORTA
GOTO LOOP
END
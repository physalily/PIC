	LIST P=PIC16F84A
	#INCLUDE <P16F84A.INC>

	__CONFIG _HS_OSC & _CP_OFF &_WDT_OFF & _PWRTE_ON

W_TEMP 	EQU	0CH
STATUS_TEMP	EQU	0DH
TMP	EQU	0EH
CNT	EQU	0FH
START_FLG	EQU	1CH
SPLIT_FLG	EQU	1EH

	ORG	0H
	GOTO	MAIN
	
	ORG	04H

;PUSH
	MOVWF	W_TEMP
	MOVF	STATUS, W
	MOVWF	STATUS_TEMP

	;IF TMR0 INT
	BTFSS	INTCON, T0IF
	GOTO	OTHER
	INCF	CNT, F
	MOVLW	D'61'
	MOVWF	TMR0
	BCF	INTCON, T0IF	;DEAR TMR0 INTERRUPTS FLAG
	GOTO 	POP

OTHER

POP
	MOVF	STATUS_TEMP, W
	MOVWF	STATUS
	SWAPF	W_TEMP, F
	SWAPF	W_TEMP, W

	RETFIE
	
;REMAINING GOES HERE

MAIN
	BCF	INTCON, GIE
	BSF	STATUS, RP0
	CLRF	TRISB
	MOVLW	b'00000011'
	MOVLW	086H
	MOVWF	OPTION_REG
	BCF	STATUS, RP0
	CLRF	PORTB
	CLRF	TMP
	MOVLW	D'61'
	MOVWF	TMR0
	BSF	INTCON, RBIE
	BSF	INTCON, T0IE
	BSF	INTCON, GIE

MAINLP
	MOVF	TMP, W
	CALL	BCD
	MOVWF	PORTB
	CLRF	CNT
	CALL	TIME01
	INCF	TMP, F
	MOVF	TMP, W
	SUBLW	d'100'
	BTFSC	STATUS, Z
	CLRF	TMP
	GOTO	MAINLP

TIME01
	MOVF	CNT, W
	SUBLW 	D'20'
	BTFSS	STATUS, Z
	GOTO 	TIME01
	RETURN

BCD
	ANDLW	0FFH
	ADDWF	PCL, F
	RETLW	00H
	RETLW	01H
	RETLW	02H
	RETLW	03H
	RETLW	04H
	RETLW	05H
	RETLW	06H
	RETLW	07H
	RETLW	08H
	RETLW	09H
	RETLW	10H
	RETLW	11H
	RETLW	12H
	RETLW	13H
	RETLW	14H
	RETLW	15H
	RETLW	16H
	RETLW	17H
	RETLW	18H
	RETLW	19H
	RETLW	20H
	RETLW	21H
	RETLW	22H
	RETLW	23H
	RETLW	24H
	RETLW	25H
	RETLW	26H
	RETLW	27H
	RETLW	28H
	RETLW	29H
	RETLW	30H
	RETLW	31H
	RETLW	32H
	RETLW	33H
	RETLW	34H
	RETLW	35H
	RETLW	36H
	RETLW	37H
	RETLW	38H
	RETLW	39H
	RETLW	40H
	RETLW	41H
	RETLW	42H
	RETLW	43H
	RETLW	44H
	RETLW	45H
	RETLW	46H
	RETLW	47H
	RETLW	48H
	RETLW	49H
	RETLW	50H
	RETLW	51H
	RETLW	52H
	RETLW	53H
	RETLW	54H
	RETLW	55H
	RETLW	56H
	RETLW	57H
	RETLW	58H
	RETLW	59H
	RETLW	60H
	RETLW	61H
	RETLW	62H
	RETLW	63H
	RETLW	64H
	RETLW	65H
	RETLW	66H
	RETLW	67H
	RETLW	68H
	RETLW	69H
	RETLW	70H
	RETLW	71H
	RETLW	72H
	RETLW	73H
	RETLW	74H
	RETLW	75H
	RETLW	76H
	RETLW	77H
	RETLW	78H
	RETLW	79H
	RETLW	80H
	RETLW	81H
	RETLW	82H
	RETLW	83H
	RETLW	84H
	RETLW	85H
	RETLW	86H
	RETLW	87H
	RETLW	88H
	RETLW	89H
	RETLW	90H
	RETLW	91H
	RETLW	92H
	RETLW	93H
	RETLW	94H
	RETLW	95H
	RETLW	96H
	RETLW	97H
	RETLW	98H
	RETLW	99H
	
	END